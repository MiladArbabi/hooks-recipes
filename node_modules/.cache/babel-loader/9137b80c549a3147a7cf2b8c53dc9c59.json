{"ast":null,"code":"var n = require(\"react\");\n\nmodule.exports = function (r, t) {\n  void 0 === t && (t = {});\n  var e = n.useState({\n    data: null,\n    loading: 0,\n    error: null,\n    controller: null\n  }),\n      o = e[0],\n      u = e[1],\n      a = n.useRef(!1);\n  return n.useLayoutEffect(function () {\n    return a.current = !0, function () {\n      a.current = !1;\n    };\n  }, []), n.useEffect(function () {\n    var n = new AbortController();\n    return r && (u(function (r) {\n      return {\n        data: null,\n        loading: r.loading + 1,\n        error: null,\n        controller: n\n      };\n    }), function (n, r, t, e) {\n      var o = Object.assign({}, r, {\n        signal: t\n      });\n      fetch(n, o).then(function (n) {\n        return n.ok ? Promise.resolve(n) : Promise.reject({\n          message: n.statusText,\n          status: n.status\n        });\n      }).then(function (n) {\n        return n.json();\n      }).then(function (n) {\n        e(function (r) {\n          return Object.assign({}, r, {\n            data: n,\n            loading: r.loading - 1\n          });\n        });\n      }).catch(function (n) {\n        var r = \"AbortError\" !== n.name ? n : null;\n        e(function (n) {\n          return Object.assign({}, n, {\n            error: r,\n            loading: n.loading - 1\n          });\n        });\n      });\n    }(r, t, n.signal, function (n) {\n      a.current && u(n);\n    })), function () {\n      return n.abort();\n    };\n  }, [r]), {\n    data: o.data,\n    loading: !!o.loading,\n    error: o.error,\n    abort: function abort() {\n      return o.controller && o.controller.abort();\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"script"}